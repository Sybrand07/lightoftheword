<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Light of the Word - Inspiration</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/lightoftheword/static/style.css">
    <link rel="icon" href="/lightoftheword/static/favicon.ico" type="image/x-icon">
    <!-- Include Font Awesome CDN for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>

    <!-- Full-width Navigation Bar -->
    <nav class="navbar">
        <div class="container">
            <a href="#" class="logo">Light of the Word</a>
            <ul class="nav-links">
                <li><a href="index.html#home">Home</a></li>
                <li><a href="index.html#about">About</a></li>
                <li><a href="index.html#products">Products</a></li>
                <li><a href="inspiration.html">Inspiration</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero" id="home">
        <div class="hero-text">
            <h1>Inspiration</h1>
            <p>Explore Bible study topics and find inspiration in the Word of God.</p>
            <a href="#faith-and-trust" class="cta-button">Discover More</a>
        </div>
    </header>

    <!-- Inspiration Page Content -->
    <div class="inspiration-container">
        <!-- Left Side: Bible Study Topics Tabs -->
        <div class="inspiration-tabs">
            <h2>Bible Study Topics</h2>
            <ul>
                <li><a href="#" data-target="#the-power-of-scripture">The Power of Scripture</a></li>
                <li><a href="#" data-target="#curious-history">Curious History</a></li>
                <li><a href="#" data-target="#genesis">The Book of Genesis</a></li>
                <li><a href="#" data-target="#theological-questions">Theological Questions</a></li>
                <li><a href="#" data-target="#islam-in-context">Islam in Context</a></li>
            </ul>
        </div>

        <!-- Right Side: Bible Study Content -->
        <div class="inspiration-content">
            <!-- Toggle View Button at the Top of the Right Side -->
            <div class="view-toggle-container">
                <button id="toggleViewBtn">
                    <i id="card-view-icon" class="fas fa-th"></i>  <!-- Card View Icon -->
                    <i id="list-view-icon" class="fas fa-list"></i>  <!-- List View Icon (hidden initially) -->
                </button>
            </div>
            <div class="content-container" id="content-container">
                <!-- Content will be loaded here dynamically -->
            </div>
        </div>

        <!-- Modal to display content -->
        <div id="content-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <img id="modal-image" src="" alt="Modal Image" class="modal-img"> <!-- Image placeholder -->
                <div id="modal-body"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Light of the Word. All rights reserved.</p>
        <p><a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
    </footer>
  
     <script>
        // Fetch and inject the generated content into the page
        fetch('/lightoftheword/templates/generated_content.html')
            .then(response => response.text())  // Convert response to text
            .then(data => {
                document.getElementById('content-container').innerHTML = data;
            })
            .catch(error => {
                console.error('Error loading content:', error);
            });
         
         document.addEventListener("DOMContentLoaded", function() {
            const tabLinks = document.querySelectorAll('.inspiration-tabs a');
            const contentSections = document.querySelectorAll('.content-section');
            const toggleViewBtn = document.getElementById('toggleViewBtn');
            const cardViewIcon = document.getElementById('card-view-icon');
            const listViewIcon = document.getElementById('list-view-icon');
            let isCardView = false; // Tracks current view mode
    
            // Tab Switching Functionality
            tabLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    tabLinks.forEach(tab => tab.classList.remove('active'));
                    contentSections.forEach(section => section.classList.remove('active'));
                    link.classList.add('active');
                    const targetContent = document.querySelector(link.getAttribute('data-target'));
                    targetContent.classList.add('active');
                    targetContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            });
    
            // Accordion Behavior (List View)
            const accordions = document.querySelectorAll('.accordion');
            accordions.forEach(button => {
                button.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const contentDiv = this.nextElementSibling;
                    const contentContainer = contentDiv.querySelector('.content-placeholder');
                    const fileName = this.getAttribute('data-file');
    
                    if (contentDiv.style.display === 'block') {
                        contentDiv.style.display = 'none';
                    } else {
                        contentDiv.style.display = 'block';
    
                        if (!contentContainer.dataset.loaded) {
                            fetch(`/lightoftheword/static/content/${fileName}`)
                                .then(response => response.text())
                                .then(data => {
                                    contentContainer.innerHTML = data;
                                    contentContainer.dataset.loaded = true;
                                })
                                .catch(error => {
                                    contentContainer.innerHTML = "<p style='color: red;'>Error loading content.</p>";
                                    console.error("Error fetching content:", error);
                                });
                        }
                    }
                });
            });
    
            // Toggle between List View and Card View
            toggleViewBtn.addEventListener('click', function() {
                isCardView = !isCardView; // Toggle mode
    
                if (isCardView) {
                    document.querySelector('.inspiration-content').classList.add('card-view');
                    toggleViewBtn.textContent = '';  // Clear button text
                    cardViewIcon.style.display = 'inline';  // Show card view icon
                    listViewIcon.style.display = 'none';   // Hide list view icon
    
                    // Convert Accordions to Cards
                    contentSections.forEach(section => {
                        section.innerHTML = convertToCards(section);
                    });
    
                } else {
                    document.querySelector('.inspiration-content').classList.remove('card-view');
                    toggleViewBtn.textContent = 'Switch to Card View';
                    cardViewIcon.style.display = 'none';  // Hide card view icon
                    listViewIcon.style.display = 'inline'; // Show list view icon
    
                    // Reload Page to Restore List View
                    location.reload();
                }
            });
    
            // Function to Convert List View to Card View
            function convertToCards(section) {
                let html = `<h3>${section.querySelector('h3').textContent}</h3><div class="card-container">`;
    
                section.querySelectorAll('.accordion').forEach(button => {
                    const title = button.textContent;
                    const fileName = button.getAttribute('data-file');
                    const date = button.getAttribute('data-date'); // Extract the date
                    const card = `/lightoftheword/static/cards/${fileName.replace('.html', '.jpg')}`; // Example thumbnail path
    
                    html += `
                        <div class="card">
                            <img src="${card}" alt="${title}" data-date="${date}">
                            <div class="card-content">
                                <h4>${title}</h4>
                                <button class="load-content" data-file="${fileName}" data-date="${date}">Read More</button>
                            </div>
                        </div>`;
                });
    
                html += `</div>`;
                return html;
            }
    
            // Event Listener for 'Read More' Button (Dynamically Added)
            document.addEventListener('click', function(event) {
                if (event.target.classList.contains('load-content')) {
                    const fileName = event.target.getAttribute('data-file');
                    const date = event.target.getAttribute('data-date'); // Get the date
                    const card = event.target.closest('.card'); // Get the parent card element
                    const imageSrc = card.querySelector('img').src; // Get the card image source
                    fetch(`/lightoftheword/static/content/${fileName}`)
                        .then(response => response.text())
                        .then(data => {
                            openModal(imageSrc, data, date); // Open content in modal with image
                        })
                        .catch(error => {
                            alert("Error loading content.");
                            console.error("Error fetching content:", error);
                        });
                }
            });
    
            // Modal functionality
            const modal = document.getElementById('content-modal');
            const modalBody = document.getElementById('modal-body');
            const closeBtn = document.querySelector('.close-btn');
    
            // Function to format the date (DD-MM-YYYY)
            function formatDate(dateStr) {
                const date = new Date(dateStr);
                const day = String(date.getDate()).padStart(2, '0'); // Pad single digits with leading zero
                const month = String(date.getMonth() + 1).padStart(2, '0'); // Get month (0-11), so add 1
                const year = date.getFullYear();
                
                return `${day}-${month}-${year}`; // Format as DD-MM-YYYY
            }
            
            // Function to open the modal with image, content, and date
            function openModal(imageSrc, content, date) {
                document.getElementById('modal-image').src = imageSrc; // Set modal image
                document.getElementById('modal-body').innerHTML = content; // Set content
                
                // Format the date and add it at the end of the modal content
                const formattedDate = formatDate(date);
                const dateElement = document.createElement('p');
                dateElement.classList.add('content-date');
                dateElement.innerHTML = `Date: ${formattedDate}`;
                document.getElementById('modal-body').appendChild(dateElement); // Append the formatted date

                document.getElementById('content-modal').style.display = 'block'; // Show modal
            }
    
            // Close the modal when the close button is clicked
            closeBtn.addEventListener('click', function() {
                modal.style.display = 'none'; // Hide the modal
            });
    
            // Close the modal when clicking outside of the modal
            window.onclick = function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none'; // Hide the modal
                }
            };
        });
    </script>
</body>
</html>
