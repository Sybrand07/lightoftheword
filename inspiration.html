<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Light of the Word - Inspiration</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <!-- Include Font Awesome CDN for icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>

    <!-- Full-width Navigation Bar -->
    <nav class="navbar">
        <div class="container">
            <a href="#" class="logo">Light of the Word</a>
            <ul class="nav-links">
                <li><a href="index.html#home">Home</a></li>
                <li><a href="index.html#about">About</a></li>
                <li><a href="index.html#products">Products</a></li>
                <li><a href="inspiration.html">Inspiration</a></li>
                <li><a href="index.html#contacts">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero" id="home">
        <div class="hero-text">
            <h1>Inspiration</h1>
            <p>Explore Bible study topics and find inspiration in the Word of God.</p>
            <a href="#the-power-of-scripture" class="cta-button">Discover More</a>
        </div>
    </header>

    <!-- Inspiration Page Content -->
    <div class="inspiration-container">
        <!-- Left Side: Bible Study Topics Tabs -->
        <div class="inspiration-tabs">
            <h2>Bible Study Topics</h2>
            <ul>
                <li><a href="#" data-target="#genesis">The Book of Genesis</a></li>
                <li><a href="#" data-target="#exodus">Exodus</a></li>
                <li><a href="#" data-target="#the-power-of-scripture">The Power of Scripture</a></li>
                <li><a href="#" data-target="#curious-history">Curious History</a></li>
                <li><a href="#" data-target="#theological-questions">Theological Questions</a></li>
                <li><a href="#" data-target="#islam-in-context">Islam in Context</a></li>
            </ul>
        </div>

        <!-- Right Side: Bible Study Content -->
        <div class="inspiration-content">
            <!-- Toggle View Button at the Top of the Right Side -->
            <div class="view-toggle-container">
                <button id="toggleViewBtn">
                    <!-- Card View Icon -->
                    <i id="card-view-icon" class="material-icons">view_carousel</i>
            
                    <!-- List View Icon -->
                    <i id="list-view-icon" class="material-icons">view_list</i>
            
                    <!-- Thumbnail View Icon -->
                    <i id="thumbnail-view-icon" class="material-icons">view_module</i>
                </button>
            </div>
            <div class="content-container">
                        

        
        
            <!-- Right Side: Bible Study Content -->
            <div class="inspiration-content">
            <div id="genesis" class="content-section"><h3>Genesis</h3>
                    
                    <button class="accordion" data-file="bible-years.html" data-date="2025-02-28 00:00:00">Genesis: How Long was a Biblical Year? </button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-28</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="creation-genesis.html" data-date="2025-02-16 00:00:00">Genesis 1: How God Created</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-16</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="human-purpose.html" data-date="2025-03-09 00:00:00">Genesis 2: Why Did God Make Humans?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-09</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="women-desire-husband.html" data-date="2025-03-09 00:00:00">Genesis 3:16 - What is a Woman's Desire for Her Husband?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-09</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="table-of-nations.html" data-date="2025-02-19 00:00:00">Genesis 10: Table of Nations</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-19</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="abraham-blessing.html" data-date="2025-03-27 00:00:00">Genesis 12: How Will All the Families of the Earth Be Blessed?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-27</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="hebrew-meaning.html" data-date="2025-03-11 00:00:00">Genesis 14: What Does the Word "Hebrew" Mean in the Bible?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-11</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="eliezer-damascus.html" data-date="2025-02-22 00:00:00">Genesis 15: Who is Eliezer of Damascus?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-22</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="ishmaels-descendants.html" data-date="2025-02-23 00:00:00">Genesis 16: Ishmael’s Descendants in History</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-23</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="kings-and-women.html" data-date="2025-02-25 00:00:00">Genesis 20: Why Did Abimelech Take Sarah Into His Household?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-25</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="jacobs-age.html" data-date="2025-02-28 00:00:00">Genesis 25–50: Jacob's Life Events & Estimated Ages</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-28</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="esau-yoke.html" data-date="2025-02-28 00:00:00">Genesis 27: When was Esau's yoke broken?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-28</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="jacobs-ladder.html" data-date="2025-02-28 00:00:00">Genesis 28: The Significance of Jacob's Ladder</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-28</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="jacobs-breeding-strategy.html" data-date="2025-03-05 00:00:00">Genesis 30: What Actually Happened in Jacob's Breeding Strategy?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-05</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="jacobs-wrestling.html" data-date="2025-03-06 00:00:00">Genesis 32: Jacob Wrestling with God</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-06</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="dinah-incident.html" data-date="2025-03-06 00:00:00">Genesis 34: The Theological Implications of the Dinah Incident</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-06</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="esaus-genealogy.html" data-date="2025-03-07 00:00:00">Genesis 36: What is the Significance of Esau's Genealogy?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-07</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="joseph-childhood.html" data-date="2025-03-08 00:00:00">Genesis 37: The Rich Symbolism of Joseph's Childhood</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-08</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="joseph-sold.html" data-date="2025-03-08 00:00:00">Genesis 37: A Play-by-Play of Joseph Being Sold by His Brothers</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-08</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="judah-and-tamar.html" data-date="2025-03-08 00:00:00">Genesis 38: The Story of Judah and Tamar</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-08</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="joseph-accusation.html" data-date="2025-03-11 00:00:00">Genesis 39: What was Potiphar’s Wife’s Accusation Against Joseph?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-11</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="joseph-prison.html" data-date="2025-03-12 00:00:00">Genesis 40: Joseph’s Dream Interpretations in Prison</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-12</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="joseph-power.html" data-date="2025-03-12 00:00:00">Genesis 41: Joseph’s Rise from Prison to Power</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-12</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="judah-repentance.html" data-date="2025-03-13 00:00:00">Genesis 42–45: The Significance of Judah’s Repentance</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-13</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="joseph-divination.html" data-date="2025-03-13 00:00:00">Genesis 44: Did Joseph Practice Divination?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-13</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="jacob-70.html" data-date="2025-03-14 00:00:00">Genesis 46: Who Were the 70 That Came To Egypt?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-14</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="joseph-tax.html" data-date="2025-03-14 00:00:00">Genesis 47: Joseph and the Birth of Egypt’s Tax System</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-14</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="joseph-israel-tribe.html" data-date="2025-03-16 00:00:00">Genesis 48: Why Was Joseph Not a Tribe of Israel?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-16</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="jacob-blessings-rebukes.html" data-date="2025-03-18 00:00:00">Genesis 49: Jacob's Final Blessings and Prophetic Declarations</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-18</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="joseph-forgiveness.html" data-date="2025-03-19 00:00:00">Genesis 50: The Challenge of Accepting Forgiveness </button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-19</p>
                    </div>
                    </div>
        <div id="exodus" class="content-section"><h3>Exodus</h3>
                    
                    <button class="accordion" data-file="exodus-pharaoh.html" data-date="2025-03-24 00:00:00">Exodus 1–14: Evidence for the Biblical Pharaoh</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-24</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="moses-life.html" data-date="2025-03-20 00:00:00">Exodus 2: Significant Moments in Moses' Life</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-20</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="midian-worship.html" data-date="2025-03-20 00:00:00">Exodus 2: Who Did the Priest of Midian Worship?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-20</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="gershom-zipporah.html" data-date="2025-03-20 00:00:00">Exodus 2: What happened to Gershom and Zipporah?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-20</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="moses-burning-bush.html" data-date="2025-03-19 00:00:00">Exodus 3: Moses' Encounter with God</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-19</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="moses-excuses.html" data-date="2025-03-20 00:00:00">Exodus 4: Excuses and God’s Reponses </button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-20</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="moses-circumcision.html" data-date="2025-03-20 00:00:00">Exodus 4: Why Did God Want to Kill Moses?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-20</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="hardened-heart.html" data-date="2025-03-23 00:00:00">Exodus 4: The Meaning of a Hardened Heart</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-23</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="egypt-plagues.html" data-date="2025-03-21 00:00:00">Exodus 7–12: The Significance of the 10 Plagues</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-21</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="exodus-modern-places.html" data-date="2025-03-25 00:00:00">Exodus 13–14: Modern Identifications of Ancient Places</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-25</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="red-sea-crossing-evidence.html" data-date="2025-03-25 00:00:00">Exodus 13–14: Historical Evidence for the Red Sea Crossing</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-25</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="too-much-manna.html" data-date="2025-03-26 00:00:00">Exodus 16: A Spiritual Truth on Gathering Too Much Manna</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-26</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="banner-meaning.html" data-date="2025-03-28 00:00:00">Exodus 17: What does "The Lord is my Banner" Mean?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-28</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="manifested-presence.html" data-date="2025-03-30 00:00:00">Exodus 19: Was God More Present on Mount Sinai Than During Any Other Recorded Encounters?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-30</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="idol-worship.html" data-date="2025-03-31 00:00:00">Exodus 20: "You shall not make anything to be with Me"</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-31</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="nakedness-exposed.html" data-date="2025-04-01 00:00:00">Exodus 20: What is meant by exposing your nakedness?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-04-01</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="law-of-servants.html" data-date="2025-04-01 00:00:00">Exodus 21: Understanding the Law of Servants</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-04-01</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="firstborn-dedication.html" data-date="2025-04-03 00:00:00">Exodus 22: What Did it Mean to Dedicate the Firstborn to the Lord? </button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-04-03</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="annual-feasts-today.html" data-date="2025-04-03 00:00:00">Exodus 23: How Do Christians Commemorate the Feasts Today?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-04-03</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="mountain-elders-god.html" data-date="2025-04-04 00:00:00">Exodus 24: What Exactly Happened on the Mountain?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-04-04</p>
                    </div>
                    </div>
        <div id="the-power-of-scripture" class="content-section"><h3>The Power Of Scripture</h3>
                    
                    <button class="accordion" data-file="gods-revelation.html" data-date="2025-02-23 00:00:00">How God Revealed Himself to Show His Ultimate Desire</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-23</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="one-dwelling.html" data-date="2025-03-05 00:00:00">John 14: The Promise of Divine Dwelling</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-05</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="intrusive-thoughts.html" data-date="2023-03-29 00:00:00">Scripture Against Intrusive Thoughts </button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2023-03-29</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="romans-12-gifts.html" data-date="2025-01-08 00:00:00">Romans 12: Gifts that are Practical</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-01-08</p>
                    </div>
                    </div>
        <div id="curious-history" class="content-section"><h3>Curious History</h3>
                    
                    <button class="accordion" data-file="temple-sacrifice.html" data-date="2025-03-06 00:00:00">Evidence from the Talmud: Signs that Temple Sacrifice was Rejected after 30 AD</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-06</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="ancient-wine.html" data-date="2024-11-27 00:00:00">Wine Consumption in the Ancient World</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2024-11-27</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="nature-idolatry.html" data-date="2024-11-26 00:00:00">Why were High Places and Green Trees Often Associated with Idolatry?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2024-11-26</p>
                    </div>
                    </div>
        <div id="theological-questions" class="content-section"><h3>Theological Questions</h3>
                    
                    <button class="accordion" data-file="why-have-you-forsaken-me.html" data-date="2025-02-13 00:00:00">Why Did Jesus Say "My God, My God, Why Have You Forsaken Me?"</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-13</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="holy-spirit-vs-imagination.html" data-date="2025-02-16 00:00:00">What Is the Difference Between The Holy Spirit and Your Imagination?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-16</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="holy-spirit-manifest.html" data-date="2025-02-16 00:00:00">Why Does the Holy Spirit Manifest in Some More than Others?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-16</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="betrothed-vs-parents.html" data-date="2025-02-01 00:00:00">1 Corinthians 7:36: Betrothed Men or Parents?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-01</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="godly-men-contentious-wife.html" data-date="2025-02-10 00:00:00">How Godly Men Deal with a Contentious Wife</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-10</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="el-elyon.html" data-date="2025-02-22 00:00:00">God’s Character: El Elyon</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-22</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="sin-vs-sinning.html" data-date="2025-01-13 00:00:00">1 John 3:8: Sin or Sinning?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-01-13</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="prayer.html" data-date="2025-03-02 00:00:00">What Does it Mean to Pray?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-02</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="seventy-weeks-prophecy.html" data-date="2025-01-09 00:00:00">Daniel 9: The Seventy-Weeks Prophecy</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-01-09</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="seventy-weeks-prophecy-rabbi.html" data-date="2025-01-09 00:00:00">Daniel 9: The Rabbinical Interpretation of the Seventy-Weeks Prophecy</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-01-09</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="barnabas.html" data-date="2024-12-30 00:00:00">Barnabas: A Hero of the Faith</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2024-12-30</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="devil-god-salvation.html" data-date="2024-12-17 00:00:00">Did the Devil Know about God's Plan for Salvation?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2024-12-17</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="gods-voice.html" data-date="2024-10-22 00:00:00">How To Identify God's Voice</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2024-10-22</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="christ-marriage-redemption.html" data-date="2025-03-09 00:00:00">How Christ’s Redemption Transforms Marriage</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-09</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="holy-spirit-filled.html" data-date="2025-03-09 00:00:00">What Does It Mean to Be Filled with the Holy Spirit?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-09</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="carry-burdens-surety.html" data-date="2025-03-13 00:00:00">Carry Burdens vs Do Not Stand Surety: A Paradox?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-13</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="church-structure.html" data-date="2025-03-20 00:00:00">A Bible-Based Model for Church Structure</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-20</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="waiting-on-god.html" data-date="2025-03-24 00:00:00">Is God Waiting on Us, or Are We Waiting on Him?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-24</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="jesus-prophecies.html" data-date="2025-03-28 00:00:00">Luke 24: How Jesus Expounded the Scriptures to Reveal Himself</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-28</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="pity-seeking.html" data-date="2025-03-28 00:00:00">Beware of Pity-Seeking Behaviour</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-28</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="complain-godly.html" data-date="2025-03-28 00:00:00">How to Complain in a Godly Manner</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-28</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="slavery-transformation.html" data-date="2025-04-01 00:00:00">Transformation of the Church’s Position on Slavery</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-04-01</p>
                    </div>
                    </div>
        <div id="islam-in-context" class="content-section"><h3>Islam In Context</h3>
                    
                    <button class="accordion" data-file="arab-israel-conflict.html" data-date="2025-02-23 00:00:00">Why is there an Arab-Israel Conflict?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-23</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="islam-and-ishmael.html" data-date="2025-02-23 00:00:00">What is Islam’s Connection to Ishmael?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-23</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="quran-creation.html" data-date="2025-02-23 00:00:00">Does the Quran Have a Creation Narrative?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-23</p>
                    </div>
                    </div>
        <div id="taboo-for-now" class="content-section"><h3>Taboo For Now</h3>
                    
                    <button class="accordion" data-file="quran-women.html" data-date="2025-02-23 00:00:00">How Does the Quran Portray the Role of a Wife?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-23</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="solomon-contentious-wife.html" data-date="2025-02-10 00:00:00">What Does Solomon Mean by a Contentious Wife?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-02-10</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="leahs-eyes.html" data-date="2025-03-04 00:00:00">Genesis 29: What is Meant by Leah's Tender Eyes?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-04</p>
                    </div>
                    
                    
                    <button class="accordion" data-file="women-curse-redeemed.html" data-date="2025-03-09 00:00:00">Genesis 3:16 - Did Christ’s Sacrifice Redeem Women’s Curse?</button>
                    <div class="accordion-content">
                        <div class="content-placeholder">Loading...</div>
                        <p class="content-date">Date: 2025-03-09</p>
                    </div>
                    </div>
        </div>

        <!-- First Modal (Summary) -->
        <div id="summary-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <img id="summary-modal-image" src="" alt="Summary Image" class="modal-img">
                <div id="summary-modal-body"></div>
                <button id="read-more-btn">Read More</button> <!-- Read More Button -->
                <button id="share-summary-btn" class="share-btn">Share</button> <!-- Share Button -->
            </div>
        </div>

        <!-- Second Modal (Full Content) -->
        <div id="full-content-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <img id="full-modal-image" src="" alt="Full Image" class="modal-img">
                <div id="full-modal-body"></div>
                <button id="share-full-btn" class="share-btn">Share</button> <!-- Share Button -->
            </div>
        </div>

        <!-- Pop-up Message -->
        <div id="copy-popup" class="copy-popup">Link copied!</div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Light of the Word. All rights reserved.</p>
        <p><a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
    </footer>
  
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const tabLinks = document.querySelectorAll('.inspiration-tabs a');
            const contentSections = document.querySelectorAll('.content-section');
            let toggleViewBtn = document.getElementById('toggleViewBtn');
            const cardViewIcon = document.getElementById('card-view-icon');
            const listViewIcon = document.getElementById('list-view-icon');
            const thumbnailViewIcon = document.getElementById('thumbnail-view-icon');
            let viewMode = "card"; // Initial mode: "card", "list", or "thumbnail"

            contentSections.forEach((section) => {
                let originalData = [];
                section.querySelectorAll(".accordion").forEach((button) => {
                    originalData.push({
                        title: button.textContent,
                        fileName: button.getAttribute("data-file"),
                        date: button.getAttribute("data-date"),
                    });
                });

                // Store data as JSON so we can use it later
                section.dataset.originalData = JSON.stringify(originalData);
            });

            // Tab Switching Functionality
            tabLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();

                    // Remove 'active' class from all tabs and content sections
                    tabLinks.forEach(tab => tab.classList.remove('active'));
                    contentSections.forEach(section => section.classList.remove('active'));

                    // Add 'active' class to the clicked tab and corresponding content
                    link.classList.add('active');
                    const targetContent = document.querySelector(link.getAttribute('data-target'));
                    targetContent.classList.add('active');

                    // Detect if mobile layout is active
                    const isMobile = window.innerWidth <= 768;
                    const inspirationTabs = document.querySelector('.inspiration-tabs');

                    let offset;
                    if (isMobile) {
                        // Use the height of sticky tabs in mobile mode
                        offset = inspirationTabs ? inspirationTabs.offsetHeight + 10 : 80;
                    } else {
                        // Fixed offset for desktop mode (adjust if needed based on your navbar height)
                        offset = 80; // Adjust this if necessary
                    }

                    // Scroll to the target content with calculated offset
                    const targetPosition = targetContent.offsetTop - offset;

                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                });
            });

            // Cycle through three views when button is clicked
            toggleViewBtn.addEventListener('click', function() {
                if (viewMode === "card") {
                    switchToListView();
                } else if (viewMode === "list") {
                    switchToThumbnailView();
                } else if (viewMode === "thumbnail") {
                    switchToCardView();
                }
            });

            function switchToCardView() {
                // Clear any previously existing classes
                document.querySelector(".inspiration-content").classList.add("card-view");
                document.querySelector(".inspiration-content").classList.remove("list-view", "thumbnail-view");

                cardViewIcon.style.display = "none";
                listViewIcon.style.display = "inline-block";
                thumbnailViewIcon.style.display = "none";

                // Restore cards using stored data
                contentSections.forEach((section) => {
                    section.innerHTML = convertToCards(section);
                });

                const cardContainers = document.querySelectorAll('.card-container'); // Get the card containers

                addCardInteractions(cardContainers);

                // Re-initialize dynamic content and event listeners

                viewMode = "card";

            }

            function switchToListView() {
                document.querySelector('.inspiration-content').classList.add('list-view');
                document.querySelector('.inspiration-content').classList.remove('card-view', 'thumbnail-view');

                cardViewIcon.style.display = 'none';
                listViewIcon.style.display = 'none';
                thumbnailViewIcon.style.display = 'inline-block';

                contentSections.forEach(section => {
                    section.innerHTML = convertToAccordion(section);
                });

                // Re-initialize dynamic content and event listeners
                initializeAccordions();
                viewMode = "list";
            }

            function switchToThumbnailView() {
                document.querySelector('.inspiration-content').classList.add('thumbnail-view');
                document.querySelector('.inspiration-content').classList.remove('card-view', 'list-view');

                cardViewIcon.style.display = 'inline-block';
                listViewIcon.style.display = 'none';
                thumbnailViewIcon.style.display = 'none';

                contentSections.forEach(section => {
                    section.innerHTML = convertToThumbnails(section);
                });

                // Re-initialize dynamic content and event listeners
                initializeAccordions();
                viewMode = "thumbnail";
            }

            // Accordion Behavior (List View)
            function initializeAccordions() {
                const accordions = document.querySelectorAll('.accordion');
                accordions.forEach(button => {
                    button.addEventListener('click', function() {
                        this.classList.toggle('active');
                        const contentDiv = this.nextElementSibling;
                        const contentContainer = contentDiv.querySelector('.content-placeholder');
                        const fileName = this.getAttribute('data-file');

                        if (contentDiv.style.display === 'block') {
                            contentDiv.style.display = 'none';
                        } else {
                            contentDiv.style.display = 'block';

                            if (!contentContainer.dataset.loaded) {
                                fetch(`static/content/${fileName}`)
                                    .then(response => response.text())
                                    .then(data => {
                                        contentContainer.innerHTML = data;
                                        contentContainer.dataset.loaded = true;
                                    })
                                    .catch(error => {
                                        contentContainer.innerHTML = "<p style='color: red;'>Error loading content.</p>";
                                        console.error("Error fetching content:", error);
                                    });
                            }
                        }
                    });
                });
            }
            // Initialize the accordions on page load
            initializeAccordions();

            // Function to Convert List View to Card View
            function convertToCards(section) {
                let html = `<h3>${section.querySelector("h3").textContent}</h3><div class="card-container">`;

                // Retrieve stored data (fallback to empty array if not found)
                const originalData = JSON.parse(section.dataset.originalData || "[]");

                originalData.forEach((item) => {
                    const cardImage = `static/cards/${item.fileName.replace(".html", ".jpg")}`;

                    html += `
                        <div class="card">
                            <img src="${cardImage}" alt="${item.title}" data-date="${item.date}">
                            <div class="card-content">
                                <h4>${item.title}</h4>
                                <button class="load-content" data-file="${item.fileName}" data-date="${item.date}">Summary</button>
                            </div>
                        </div>`;
                });

                html += `</div>`;
                return html;
            }

            // Function to Convert to Thumbnails View
            function convertToThumbnails(section) {
                let html = `<h3>${section.querySelector("h3").textContent}</h3><div class="thumbnail-container">`;

                // Retrieve stored data (fallback to empty array if not found)
                const originalData = JSON.parse(section.dataset.originalData || "[]");

                originalData.forEach((item) => {
                    const cardImage = `static/cards/${item.fileName.replace(".html", ".jpg")}`;

                    html += `
                        <div class="thumbnail">
                            <img src="${cardImage}" alt="${item.title}" data-date="${item.date}">
                            <div class="card-content">
                                <h4>${item.title}</h4>
                                <button class="load-content" data-file="${item.fileName}" data-date="${item.date}">Summary</button>
                            </div>
                        </div>`;
                });

                html += `</div>`;
                return html;
            }

            // Function to Convert Card View Back to Accordion (List View)
            function convertToAccordion(section) {
                let html = `<h3>${section.querySelector('h3').textContent}</h3>`;

                section.querySelectorAll('.card').forEach(card => {
                    const title = card.querySelector('h4').textContent;
                    const fileName = card.querySelector('.load-content').getAttribute('data-file');
                    const date = card.querySelector('.load-content').getAttribute('data-date');

                    html += `
                        <div class="accordion" data-file="${fileName}" data-date="${date}">
                            <span class="accordion-title">${title}</span>
                        </div>
                        <div class="accordion-content" style="display: none;">
                            <div class="content-placeholder"></div>
                        </div>`;
                });

                return html;
            }

            // Call this function when the page loads
            initializeFromURL();

            // Initialize with the default "card" view
            switchToCardView();

            // Get modal elements
            const summaryModal = document.getElementById('summary-modal');
            const fullModal = document.getElementById('full-content-modal');

            const summaryModalBody = document.getElementById('summary-modal-body');
            const fullModalBody = document.getElementById('full-modal-body');

            const summaryModalImage = document.getElementById('summary-modal-image');
            const fullModalImage = document.getElementById('full-modal-image');

            const closeButtons = document.querySelectorAll('.close-btn'); // Select all close buttons
            const readMoreButton = document.getElementById('read-more-btn'); // Read More button

            let storedImageSrc = "";
            let storedContent = "";
            let storedDate = "";

            // Function to format the date (DD-MM-YYYY)
            function formatDate(dateStr) {
                const date = new Date(dateStr);
                const day = String(date.getDate()).padStart(2, '0'); // Pad single digits with leading zero
                const month = String(date.getMonth() + 1).padStart(2, '0'); // Get month (0-11), so add 1
                const year = date.getFullYear();

                return `${day}-${month}-${year}`; // Format as DD-MM-YYYY
            }
            
            function incrementViewCount(fileName) {
                const apiUrl = `https://script.google.com/macros/s/AKfycbzK4sYtSTxCgnrKjo1h6aCiPUe0K8bVAecxxNYfnKh4hVHITMQYqAz6vDz3gTbfJLHrcQ/exec?fileName=${encodeURIComponent(fileName)}`;

                return fetch(apiUrl)
                    .then(response => response.text())
                    .then(count => {
                        storedViewCount = count;  // Store view count for use in full content modal
                        return storedViewCount;  // Return the view count so it can be used later
                    })
                    .catch(error => {
                        console.error("Error fetching view count:", error);
                        return 0;  // If there is an error, return a default count
                    });
            }

            function updateURL(view, fileName) {
                const newUrl = `?view=${view}&file=${fileName}`;
                window.history.pushState({}, '', newUrl);
            }

            // Open Summary Modal
            function openSummaryModal(imageSrc, summaryContent, date, fileName) {
                storedImageSrc = imageSrc;
                storedSummary = summaryContent;
                storedDate = formatDate(date);
                storedFileName = fileName;

                 // Fetch view count asynchronously (doesn't block modal opening)
                incrementViewCount(fileName).then(viewCount => {
                    // Update modal content with view count
                    document.getElementById(`view-counter-${fileName}`).innerText = `Times viewed: ${viewCount}`;
                });

                // Update modal content with summary
                summaryModalImage.src = imageSrc;
                summaryModalBody.innerHTML = `
                    ${summaryContent}
                    <p id="view-counter-${fileName}" class="view-count">Loading views...</p>
                `; 

                summaryModal.style.display = 'block'; 
            }

            // Open Full Content Modal
            function openFullModal() {
                // Load full content immediately
                fetch(`static/content/${storedFileName}`)
                    .then(response => response.text())
                    .then(fullContent => {
                        fullModalImage.src = storedImageSrc;
                        fullModalBody.innerHTML = `
                            <p>${fullContent}</p>
                            <p class="content-date">Date: ${storedDate}</p>
                            <p class="view-count" id="view-count-full">Loading views...</p>  <!-- Initial placeholder -->
                        `;

                        fullModal.style.display = 'block'; 

                        // Fetch view count after full content is loaded, and update the count
                        incrementViewCount(storedFileName).then(viewCount => {
                            document.getElementById('view-count-full').innerText = `Times viewed: ${viewCount}`;
                        });
                    })
                    .catch(error => {
                        alert("Error loading full content.");
                        console.error("Error fetching full content:", error);
                    });
            }
            
            // Close modals and update URL
            function closeModals() {
                summaryModal.style.display = 'none';
                fullModal.style.display = 'none';

                // Update URL to remove modal params
                history.replaceState({}, '', window.location.pathname);
            }

            // Attach event to 'Read More' button
            readMoreButton.addEventListener('click', openFullModal);

            // Close modals when clicking close buttons
            closeButtons.forEach(btn => {
                btn.addEventListener('click', closeModals);
            });

            // Close modals when clicking outside content
            window.addEventListener('click', function(event) {
                if (event.target === summaryModal || event.target === fullModal) {
                    closeModals();
                }
            });

            // Handle browser back/forward navigation
            window.addEventListener('popstate', function(event) {
                if (!event.state || !event.state.view) {
                    closeModals(); // Close if no modal is open
                } else if (event.state.view === 'summary') {
                    openSummaryModal(storedImageSrc, storedSummary, storedDate, storedFileName);
                } else if (event.state.view === 'full') {
                    openFullModal();
                }
            });

            // Attach event to dynamically loaded "Read More" buttons
            document.addEventListener('click', function(event) {
                let card = event.target.closest('.card') || event.target.closest('.thumbnail'); // Detect click on any part of the card
                if (!card) return;

                // Find the "Summary" button inside the clicked card
                let summaryButton = card.querySelector('.load-content');
                if (!summaryButton) return;

                const fileName = summaryButton.getAttribute('data-file');
                const date = summaryButton.getAttribute('data-date');
                const imageSrc = card.querySelector('img').src;

                // Fetch summary content
                fetch(`static/summaries/${fileName}`)
                    .then(response => response.text())
                    .then(summaryData => {
                        openSummaryModal(imageSrc, summaryData, date, fileName);
                    })
                    .catch(error => {
                        alert("Error loading summary.");
                        console.error("Error fetching summary:", error);
                    });
            });

             // Function to get URL parameters
             function getQueryParam(param) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(param);
            }

            // Function to initialize modals based on URL parameters
            function initializeFromURL() {
                const view = getQueryParam('view');  // summary or full
                const fileName = getQueryParam('file'); // filename

                if (view && fileName) {
                    // Find the corresponding accordion button using data-file attribute
                    let accordionBtn = document.querySelector(`.accordion[data-file="${fileName}"]`);

                    if (accordionBtn) {
                        let contentContainer = accordionBtn.nextElementSibling; // Get accordion-content div
                        let date = accordionBtn.getAttribute('data-date') || 'No Date Provided';

                        // Try to find an image within the same content block
                        let card = accordionBtn.closest('.content-section');
                        let imageElement = card ? card.querySelector('img') : null;
                        // Construct the image source based on how cards are built
                        let imageSrc = `static/cards/${fileName.replace(".html", ".jpg")}`;

                        // Open the accordion if it's closed
                        if (!contentContainer.classList.contains('active')) {
                            accordionBtn.click(); 
                        }

                        // Fetch the summary content
                        fetch(`static/summaries/${fileName}`)
                            .then(response => response.text())
                            .then(summaryData => {
                                // Open the summary modal with the correct image
                                openSummaryModal(imageSrc, summaryData, date, fileName);

                                // If the URL is for full view, open full modal after summary
                                if (view === 'full') {
                                    storedImageSrc = imageSrc;
                                    storedSummary = summaryData;
                                    storedDate = date;
                                    storedFileName = fileName;
                                    openFullModal();
                                }
                            })
                            .catch(error => {
                                console.error("Error fetching summary:", error);
                            });
                    } else {
                        console.warn("No matching content found for filename:", fileName);
                    }
                }
            }

            // Function to copy URL to clipboard
            function copyToClipboard(text) {
                navigator.clipboard.writeText(text).then(() => {
                    showCopyPopup();
                }).catch(err => {
                    console.error("Failed to copy:", err);
                });
            }

            // Function to show the "Copied" popup
            function showCopyPopup() {
                let popup = document.getElementById('copy-popup');
                popup.classList.add('show');
                setTimeout(() => {
                    popup.classList.remove('show');
                }, 2000); // Hide after 2 seconds
            }

            // Attach event listeners for the "Share" buttons
            document.getElementById('share-summary-btn').addEventListener('click', function() {
                let url = `${window.location.origin}${window.location.pathname}?view=summary&file=${storedFileName}`;
                copyToClipboard(url);
            });

            document.getElementById('share-full-btn').addEventListener('click', function() {
                let url = `${window.location.origin}${window.location.pathname}?view=full&file=${storedFileName}`;
                copyToClipboard(url);
            });

            // Call the function when you need to add the card interactions
            const cardContainers = document.querySelectorAll('.card-container'); // Get the card containers

            addCardInteractions(cardContainers);
            
            function addCardInteractions(cardContainers) {
                cardContainers.forEach((container) => {
                    let cards = Array.from(container.querySelectorAll(".card"));
                    let isDragging = false;                
                    let totalCards = cards.length;
                    let isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints;
                    let currentIndex = 0;
                    let lastTouchX = 0;
                    let debounceTimeout;

                    function updateCardPositions() {
                        const containerWidth = container.clientWidth - 20;
                        const cardWidth = cards[0].offsetWidth;
                        const maxSpacing = 50;
                        const availableSpacing = Math.min(maxSpacing, containerWidth / totalCards);
                        const maxTotalShift = Math.min(containerWidth - cardWidth, totalCards * maxSpacing);

                        let activeCardShift = (currentIndex / (totalCards - 1)) * maxTotalShift;

                        cards.forEach((card, index) => {
                            let offset = index - currentIndex;
                            let scale = 1 - Math.abs(offset) * 0.05;
                            let xOffset = offset * availableSpacing + activeCardShift;
                            
                            // Only update z-index if needed to avoid flicker
                            if (Math.abs(offset) < 1) {
                                card.style.zIndex = totalCards + 1;
                            } else {
                                card.style.zIndex = totalCards - Math.abs(offset);
                            }

                            // Apply smooth transform transition
                            card.style.transform = `translateX(${xOffset}px) scale(${scale})`;
                            card.style.opacity = index === currentIndex ? 1 : 0.9;
                        });
                    }


                    function findClosestCard(touchX) {
                        let closestIndex = 0;
                        let minDistance = Infinity;

                        cards.forEach((card, index) => {
                            let box = card.getBoundingClientRect();
                            let distance = Math.abs(touchX - (box.left + box.width / 2));

                            if (distance < minDistance) {
                                minDistance = distance;
                                closestIndex = index;
                            }
                        });

                        return closestIndex;
                    }

                    function handleTouchStart(e) {
                        isDragging = true;
                        lastTouchX = e.touches[0].clientX;
                        if (debounceTimeout) clearTimeout(debounceTimeout);
                    }

                    function handleTouchMove(e) {
                        if (!isDragging) return;
                        let touchX = e.touches[0].clientX;

                        // Apply slight delay to stabilize selection
                        debounceTimeout = setTimeout(() => {
                            currentIndex = findClosestCard(touchX);
                            updateCardPositions();
                        }, 30);

                        lastTouchX = touchX;
                    }

                    function handleTouchEnd() {
                        isDragging = false;
                        if (debounceTimeout) clearTimeout(debounceTimeout);
                    }

                    function handleCardHover(e) {
                        let hoveredCard = e.target.closest('.card');
                        if (!hoveredCard) return;
                        currentIndex = cards.indexOf(hoveredCard);
                        updateCardPositions();
                    }

                    // Attach event listeners
                    if (isTouchDevice) {
                        container.addEventListener("touchstart", handleTouchStart, { passive: true });
                        container.addEventListener("touchmove", handleTouchMove, { passive: true });
                        container.addEventListener("touchend", handleTouchEnd);
                    } else {
                        container.addEventListener("mousemove", handleCardHover);
                    }

                    updateCardPositions();
                });
            }
        });
    </script>
    
    
</body>
</html>
